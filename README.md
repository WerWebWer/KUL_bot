# KUL_bot

[KUL_bot](http://github.com/WerWebWer/KUL_bot") –  прототип команды 1DevFull участника Цифрового прорыва 2020 Приволжского IT хаба.
Это бек энд репозиторий.
Frontend - https://github.com/kirillnepomiluev/kul  .  (webApp) Flutter Можно сделать билд и как мобильное приложение на Android и на IOS и как webApp.

Решение - чат бот, позволяющий пользователю, ответив на вопросы получить информацию о доступных ему льготах, а так же помочь с офромлением документов.  Нейронная сеть обучающаяся на результатах ответов подбирает оптимальную последовательность вопросов. 
Ссылка на чат бот - @kul_1devfull_bot   (Telegram)

## Web-App

[WebApp](https://github.com/kirillnepomiluev/kul "WebApp")

## Предзапускная установка

Для начала обновляем индекс пакетов:

> sudo apt update

А также установка и настройкаа Python

> sudo apt-get install python3

Устанавливаем необходимые библиотеки:

`pip install __future__ pickle os.path googleapiclient.discovery import build google_auth_oauthlib.flow keras keras-models keras-layers Dense Dropout Flatten Conv2D MaxPooling2D LSTM Conv3D wandb wandb kerasv tensorflow matplotlib.pyplot`

## ML

Формируюем датасет и базу данных по всем параметрам: льготы, группы, категории и критерии по каждым признакам.

После необходимо запустить нейросеть `* Actual code with ML *`, чтобы она прогналась на данных  и уже сформировалось нужное количество связей и слоев

Отдаем несколько прописанных сценариев, говоря что она должна выдать на вход - буквально пару раз

После же нейросеть готова сама дальше обучаться и развиваться - обучение с учителем.


## БОТ

Чтобы программа на Python умела управлять Телеграм-ботами, нужно в самое начало кода добавить строки:

`import telebot; bot = telebot.TeleBot('токен');`

Единственное, о чём нужно не забыть — заменить слово «токен» на настоящий токен, который дал нам `@BotFather`. Открываем программу и добавляем.

Теперь научим бота реагировать на слово «Привет». Для этого добавим после строчек с импортом новый метод и сразу пропишем в нём реакцию на нужное слово. Так или инаяе прописываем сценарий ключевых слов - главных.

И последнее, что нам осталось сделать до запуска, — добавить после метода такую строчку:

`bot.polling(none_stop=True, interval=0)`

Она скажет программе, чтобы она непрерывно спрашивала у бота, не пришли ли ему какие-то новые сообщения. Запускаем программу и проверяем, как работает наш бот.

После добавляем начинку по кнопкам и в принципе  бот готов.

Не забываем про обработчик кнопок (отловка ивентов) - Указывая ид кнопок.


.
## Итеграция ML и BOT между собой

Прокидываем данные между веденными пользователеем и входом ML. Забираем данные от нейросети  и их же отправляем пользователю. Одновременно парся БД всех льгот - для отлавливания их в реальном времени, чтобы пользователь мог сам остановить и посмотреть.

Добавлении немного человечности боту и он готов.

## Запук

Для запуска необходимо иметь токен телеграм бота и данные БД.  

Запуск:

`.run.py`

## Web-App

